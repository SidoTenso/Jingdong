<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/register.css">
    <title>Document</title>
</head>

<body>
    <header>
        <div class="header">
            <a href="index.html" class="logo"></a>
            <div class="logotitle">欢迎注册</div>
            <div class="login">
                <span>已有帐号？</span>
                <a href="login.html">请登录</a>
            </div>
        </div>
    </header>
    <div class="container">
        <div class="content">
            <div class="reg-form">
                <form action="/register">
                    <div class="form-item">
                        <label for="username">用户名</label>
                        <input type="text" name="username" id="username" placeholder="您的账户名和登录名" required>
                        <i class="success"></i>
                    </div>
                    <div class="form-tip">
                        <i class="gth"></i>
                        <!-- <span>支持中文、数字、字母、下划线的组合，4-20个字符</span> -->
                    </div>
                    <div class="form-item">
                        <label for="password">设置密码</label>
                        <input type="password" name="password" id="password" placeholder="建议至少使用两种字符组合" required>
                        <i class="success"></i>
                    </div>
                    <div class="form-tip">
                        <i class="gth"></i>
                        <!-- <span>建议使用字母、数字和符号两种以上的组合，6-20个字符</span> -->
                    </div>
                    <div class="form-item">
                        <label for="checkpsw">确认密码</label>
                        
                        <input type="password" name="checkpsw" id="checkpsw" placeholder="请再次输入密码" required>
                        <i class="success"></i>
                    </div>
                    <div class="form-tip">
                            <i class="gth"></i>
                        <!-- <span>请再次输入密码</span> -->
                    </div>
                    <div class="phone-wrap">
                        <div class="form-item">
                            <label for="phone" class="phone">中国 0086 <a href="#"></a></label>
                            <input type="text" name="phone" id="phone" placeholder="建议使用常用手机" required>
                            <i class="success"></i>
                        </div>
                        <div class="form-tip">
                            <i class="gth"></i>
                            <!-- <span>完成验证后，你可以使用该手机登录和找回密码</span> -->
                        </div>
                        <div class="email">
                            <a href="#">邮箱验证</a>
                        </div>
                    </div>
                    <div class="form-item">
                        <label for="authCode">验证码</label>
                        <input type="text" name="authCode" id="authCode" placeholder="请输入验证码" required>
                        
                        <img class="authCode" src="./img/register/image" alt="">
                    </div>
                    <div class="form-tip">
                            <i class="gth"></i>
                        <!-- <span>看不清？点击图片更换验证码</span> -->
                    </div>
                    <div class="form-item">
                        <label for="phoneCode">手机验证码</label>
                        <input type="text" name="phoneCode" id="phoneCode" placeholder="请输入手机验证码">
                        <!-- <img class="authCode" src="./img/register/image" alt=""> -->
                        <button type="button" class="getPhoneCode">获取手机验证码</button>
                    </div>
                    <div class="form-tip">
                        <span></span>
                    </div>
                    <div>
                        <button class="register" type="submit">
                            立即注册
                        </button>
                    </div>

                </form>
            </div>
            <div class="reg-other">
                <div class="company-reg">
                    <a href="#">
                        <i class="company-logo"></i>
                        <span>企业用户注册</span>
                    </a>
                </div>
                <div class="inter-cust">
                    <a href="#">
                        <i class="inter-logo"></i>
                        <span>
                                INTERNATIONAL
                                <br>
                                CUSTOMERS
                        </span>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <a class="feedback" href="#">

    </a>
    <footer>
        <div class="footer">
            <div class="list">
                <a href="#">关于我们</a>
                <span>|</span>
                <a href="#">联系我们</a>
                <span>|</span>
                <a href="#">人才招聘</a>
                <span>|</span>
                <a href="#">商家入驻</a>
                <span>|</span>
                <a href="#">广告服务</a>
                <span>|</span>
                <a href="#">手机京东</a>
                <span>|</span>
                <a href="#">友情链接</a>
                <span>|</span>
                <a href="#">销售联盟</a>
                <span>|</span>
                <a href="#">京东社区</a>
                <span>|</span>
                <a href="#">京东公益</a>
                <span>|</span>
                <a href="#">English Site</a>
            </div>
            <div class="info">
                <span>Copyright©2004-2016  京东JD.com 版权所有</span>
            </div>
        </div>
    </footer>
    <script src="./js/jquery.js"></script>
    <script src="./js/表单验证插件/dist/jquery.validate.js"></script>
    <script src="./js/表单验证插件/dist/localization/messages_zh.js"></script>
    <script>
        // $('.form-item').on('focus', 'input', function (e) {
        //     $(e.delegateTarget).next().find('span').show()
        // })
        // $('.form-item').on('blur', 'input', function (e) {
        //     $(e.delegateTarget).next().find('span').hide()
        // })
        $.validator.setDefaults({
            errorElement: 'em',
            errorClass: 'error',
            errorPlacement: (error,ele)=>{
                error.appendTo($(ele).parent().next())
            },
            success: function(error,ele){
                console.log(ele)
                $(ele).parent().next().children().hide()
                $(ele).next().show()


            },
            highlight: function(ele){
                console.log('验证未通过'+ele)
                $(ele).siblings('i').hide()
                $(ele).parent().next().children().show().eq(0).removeClass().addClass('warn')
            }
        })

        $('form').validate({
            // debug: true,
            rules: {
                username: {
                    required: true,
                    minlength: 4,
                    maxlength: 20
                },
                password: {
                    required: true,
                    minlength: 6,
                    maxlength: 20
                },
                checkpsw: {
                    required: true,
                    equalTo: '#password'
                },
                phone: {
                    required: true,
                    minlength: 5,
                    maxlength: 5
                },
                authCode: {
                    required: true,
                    minlength: 4
                }
            },
            messages: {
                username: {
                    required: '请输入用户名',
                    minlength: '用户名长度在4-20个字符',
                    maxlength: '用户名长度在4-20个字符'
                },
                password: {
                    required: '请输入密码',
                    minlength: '密码长度在6-20个字符',
                    maxlength: '密码长度在6-20个字符'
                },
                checkpsw: {
                    required: '请输入确认密码',
                    equalTo: '两次密码不一致'
                },
                phone: {
                    required: '请输入电话',
                    minlength: '电话长度为5',
                    maxlength: '电话长度为5'
                },
                authCode: {
                    required: '请输入验证码',
                    minlength: '验证码长度为4',
                }
            },
            submitHandler:function(form,e){
                e.preventDefault()
                console.log(arguments)
                $.post(form.action, $(form).serialize(), function (data) {
                    console.log(data)
                    if(data.code==2){
                        location.href='login.html'
                    }
                    
                })
            }
        })
        // $('form').submit(function (e) {
        //     e.preventDefault();
        //     $.post(this.action, $(this).serialize(), function (data) {
        //         console.log(data)
                
        //     })
        // })
    </script>
</body>

</html>